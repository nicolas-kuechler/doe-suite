# TODO: add different host configs depending on the experiment using ansible host variables

experiments:
  - experiment_1:       # the experiment configuration
      n_repetitions: 2  # how often each run is repeated (i.e. each level config)
      common_roles:     # roles that are run for all hosts during the initial setup
        - setup-common
      host_types:
        client:
          n: 1                    # number of current instances
          n_max: 1                # maximum number of instances
          n_check: 1              # will check the systemd service of `n_check`
                                  # remote instances for `n_check` \in [0, X)
          init_role: setup-client # role run on the initial instance setup
        server:
          n: 1                    # number of current instances
          n_max: 1                # maximum number of instances
          n_check: 1              # will check the systemd service of `n_check`
                                  # remote instances for `n_check` \in [0, X)
          init_role: setup-server # role run on the initial instance setup
      base_experiment:
        host_vars:
          client:
            arg1: 10
            arg2: $FACTOR$
          server:
            arg3: $FACTOR$
            arg4: "test1"
        info: $FACTOR$

      # in the experiments object you have a list for the different experiments
      # with the values for the fields marked as $FACTOR$ in the base config object.
      factor_levels:
        - host_vars:
            client:
              arg2: 1
            server:
              arg3: 1
            info: "c1"
        - host_vars:
            client:
              arg2: 2
            server:
              arg3: 2
            info: "c2"
        - host_vars:
            client:
              arg2: 3
            server:
              arg3: 3
            info: "c3"
  - experiment_2:       # the experiment configuration
      n_repetitions: 1  # how often to repeat each run (i.e. each level config)
      common_roles:     # roles that are run for all hosts during the initial setup
        - setup-common
      host_types:
        client:
          n: 1                    # number of current instances
          n_max: 1                # maximum number of instances
          n_check: 1              # will check the systemd service of `n_check`
                                  # remote instances for `n_check` \in [0, X)
          init_role: setup-client # role run on the initial instance setup
        server:
          n: 1                    # number of current instances
          n_max: 1                # maximum number of instances
          n_check: 1              # will check the systemd service of `n_check`
                                  # remote instances for `n_check` \in [0, X)
          init_role: setup-server # role run on the initial instance setup
      base_experiment:
        host_vars:
          client:
            arg1: 10
            arg2: $FACTOR$
          server:
            arg3: $FACTOR$
            arg4: "test1"
        info: $FACTOR$

      # in the experiments object you have a list for the different experiments
      # with the values for the fields marked as $FACTOR$ in the base config object.
      factor_levels:
        - host_vars:
            client:
              arg2: 2
            server:
              arg3: 2
          info: "c2"
